= Mule ESB 3.3.1 Release Notes
:keywords: release notes, esb

Skip to <<Migrating from Mule ESB 3.3.0 to 3.3.1>>

September 4, 2012

MuleSoft is pleased to announce the release of *Mule ESB 3.3.1* which offers improvements and stabilization to Mule Studio and the Mule Devkit. These release notes apply to both the *Enterprise Edition* and the *Community Edition* of Mule ESB 3.3.1.

Download link:http://www.mulesoft.com/mule-esb-open-source-esb[*Mule ESB 3.3.1 Enterprise Edition*] or link:http://www.mulesoft.org/download-mule-esb-community-edition[*Mule ESB 3.3.1 Community Edition*] to take advantage of an improved and hardened Mule ESB.

== Document Revision History

September 4, 2012, v1.0 Initial Publication +
January 11, 2013, v1.1 Revision to include information about the newly released CE version of 3.3.1. 

== Current Release Version

[width="100%",cols="34%,33%,33%",options="header",]
|===
|  |Enterprise Edition |Community Edition
|ESB |Version 3.3.1 +
 Build 19992 |Version 3.3.1
|Studio |Version 1.3.1 +
 Build 201209041237 |Version 1.3.1  +
 Build 201209041237
|Management Console |Build 1ee24c0089 | 
|SAP Enterprise +
 Connector |2.0 | 
|CMIS Connector |1.7.0 |1.7.0
|Magento Connector |1.7.0 |1.7.0
|MongoDB Connector |2.2.0 |2.2.0
|Salesforce Connector |5.0 |5.0
|Twilio Connector |1.3.0 |1.3.0
|Twitter Connector |2.7.1 |2.7.1
|===

== New Features and Functionality

==== Mule Studio

The following list details the new functionality *Mule Studio* offers in 3.3.1.

* Ability to link:/mule-user-guide/v/3.7/flow-reference-component-reference[reference flows] in multiple configuration files in a project
* Ability to export the Studio canvas to an image file (`.png`, `.jpg`, `.bmp`)
* Ability to adjust Studio's default settings and behavior (i.e. change preferences)
* Ability to disable error reporting in the Configuration XML pane

==== Mule DevKit

The following list details the new functionality the *Mule Devkit* offers in 3.3.1.

* *Automatic REST Call Generation*: The new Mule DevKit annotation automatically generates REST API code for your connector, yet preserves your control over parameters to send, payload format, and more. Further, when you use OAuth 1.0a or OAuth 2.0, the automatic REST call generator automatically signs the request.
* *Java Complex Type Support*: Mule DevKit has extended its support of Java types. You can now use complex types as message processor arguments, or even as configurable fields. Mule DevKit can generate a full schema for the complex type, enabling a connector user to naturally construct the object from a Mule configuration.
* *Multiple Authentication Mechanisms*: Mule DevKit now enables you to write connectors which offer multiple authentication mechanisms. As an example, you can write a connector that supports OAuth 2.0 _and_ regular username/password authentication in the same connector under the same Mule configuration namespace.
* *Expression Binding*: Mule DevKit introduces support for `@Expr` annotation that automatically binds a message processor's arguments to a Mule expression.

== Noteworthy Improvements

==== Mule Studio

The following list details the improvements to *Mule Studio*.

* Enhanced ability to *drag and drop* building blocks within the canvas
* Improved building block filter which enables *search by keyword*
* Improved behavior of link:/mule-user-guide/v/3.7/choice-flow-control-reference[Choice Flow Control]
* Improved usability for the link:/mule-user-guide/v/3.3/datamapper-transformer-reference[Anypoint DataMapper Transformer]

==== Mule DevKit

The following list details the improvements to the *Mule DevKit*.

* *Revamped OAuth Support*: We have extended the feature coverage for the auto generated OAuth 1.0a and OAuth 2.0 clients. When building OAuth-secured connectors, you can: +
** use the "state" attribute as specified in the OAuth 2.0 standard
** de-authorize connectors, reverting them to their initial pre-authorize state
** execute extra code, after the authorization process takes place, in a new lifecycle event
* use extra authorization parameters for APIs that require extra information when performing the authorization process
* automatically save and restore access tokens when using OAuth 2.0
** automatically refresh access tokens as specified in the OAuth 2.0 standard
* *Minor Connection Management Improvements*: Mule DevKit enables you to declare optional connection parameters, with optional default values. Also, connector users can automatically specify whether Mule should use a Reconnection Strategy when a connection is faulty or dropped.

== Hardware and Software System Requirements

For most use cases, Mule ESB 3.3.1 does not change the hardware and software system requirements established by Mule ESB 3.3.0

Please mailto:sales@mulesoft.com[contact MuleSoft] with any questions you may have about system requirements.

== Important Notes and Known Issues in this Release

This list covers some of the known issues with Mule ESB 3.3.1. Please read this list before reporting any issues you may have spotted.

=== Mule ESB

[width="100%",cols="50%,50%",]
|===
|MULE-6419 |Loanbroker example miss log4j.properties +
 Workaround: Create a log4j.properties file in classes directory.
|EE-2859 |CVS to map transformer fails to find mapping file from classpath +
 Workaround: Use a path relative the the app path (app.home) for mapping file.
|===

=== Mule Studio

In addition to the known issues listed below, there exists a known issue within the software upgrade process in Studio. Complete the following steps to upgrade to the Enterprise Edition of Mule Studio 3.3.1.

. Under the *Help* menu in Studio, select *Check for Updates.*
+
[NOTE]
Under the *Help* menu, do not select *Install New Software...* +
 Studio _updates_ the existing software rather than _installing_ new software.
. The update wizard automatically selects all software available to update. Click *Next* to continue.
. Click *Next* to confirm update details.
. Select the radio button labelled *I accept the terms of the license agreements*, then click *Finish*.

[width="100%",cols="50%,50%",]
|===
|STUDIO-37 |When double clicking on a reported XML problem (under "Problems" tab), if in XML view, Mule should highlight the line on the XML where the problem is detected or at least show the line number of the error.
|STUDIO-173 |sometimes, when removing several items one by one, undo works only once. (usualy in Edit->Undo case)
|STUDIO-382 |Changes to Java code do not get hot deployed
|STUDIO-436 |Endpoints not changing their icons when setting RQ-RS for Composite source and Sub-Flow
|STUDIO-459 |Unable to add a response when creating a second flow in the same mflow
|STUDIO-489 |-Dmule.verbose.exceptions=true not supported for VM/Program arguments when running a configuration
|STUDIO-570 |No warning when creating 2 flows with same name in diff mflows in the same project - It fails when the app is running
|STUDIO-574 |Difficult to run configuration if you haven't already ran the app as a Mule app
|STUDIO-596 |Script Transformer and Script Component change the generic script framework to specific transformer and component script depending on the engine when clicking on ok and clicking on config xml and coming back to the canvas
|STUDIO-783 |Wiretap is not available as a widget
|STUDIO-986 |Within the jersey:resources XML element, the editor overwrites changes I make to the component element when I edit the canvas and save
|STUDIO-1083 |Inconsistencies regarding some validations for Splitter, Expression Transformer and Expression Filter
|STUDIO-1084 |The line location is not displayed anymore for the errors in the problems pane
|STUDIO-1169 |Add a validation that prevents the user from creating the same JDBC query in the connector and endpoint with the same name
|STUDIO-1212 |Response section is not displayed
|STUDIO-1608 |Doesn't support passing an object inside a list by reference in connectors
|STUDIO-1611 |JDBC endpoint: the Key: combobox is not aligned with other combo boxes in the General tab
|STUDIO-1638 |Unable to get the menu options when right-clicking on the mflow of the first project in some specific cases
|STUDIO-1650 |Renaming flow XML doesn't update mule-deploy.properties
|STUDIO-1766 |mflow file is not generated after exporting and importing a project that contains errors in the XML (E.g.: Not having correct namespaces)
|STUDIO-1811 |Studio is not validating that certain scopes should start only with inbound or outbound endpoints
|STUDIO-1874 |All Message Router: 'All properties' tab should be removed in Studio CE
|STUDIO-1957 |Data Mapper Input Argument data type cannot be changed once created
|STUDIO-1990 |Project Structure: when opening a configuration file from src/main/resources you miss the outline view.
|STUDIO-2177 |XML autocomplete uses a wrong schema alias
|STUDIO-2234 |Block the editing of the DisplayName in the canvas for Exception Strategies
|STUDIO-2235 |Direct-edit display name has a strange behavior under Windows
|STUDIO-2247 |Validation: Flow name property should be unique across the whole project
|STUDIO-2248 |Global Elements duplicate name problems do not disappear when they are resolved in another file
|STUDIO-2249 |Remove MIME type attribute from the HTTP endpoint advanced tab
|STUDIO-2255 |Missing <tracking:transaction/> support
|STUDIO-2258 |Two way editing is changing the order of the transaction element
|===

=== Mule Management Console

_Enterprise Edition_

[width="100%",cols="50%,50%",]
|===
|n/a |none
|===

=== Mule DevKit

[width="100%",cols="50%,50%",]
|===
|n/a |You cannot use a 3.3.1-developed connector which uses uses OAuth 1.0a or OAuth 2.0 in an application with a 3.3.0-developed connector which uses OAuth 1.0a or 2.0.
|===

== Fixed in this Release

=== Mule ESB

[width="100%",cols="50%,50%",]
|===============
|MULE-6347 |Not longer possible to set a custom http.status with a custom exception strategy
|MULE-6381 |Variables are declared as final in MEL expressions
|EE-2674 |JMS Consumer fails in HA Cluster
|EE-2755 |MESSAGE-PROCESSOR notification events are not detected by the notification publisher
|MULE-6140 |Custom Exception Strategy class not getting invoked
|MULE-6171 |When deploying a flow that has a mule-config.xml with a future date, it starts a boucle of deployments
|MULE-6202 |Name is not a valid attribute for the new attachment, property, variable and session variable transformers
|MULE-6209 |Referencing "exception" inside a groovy script should return null if there were no exception thrown
|MULE-6268 |Regression: Shouldn't log the full payload in anything other than DEBUG
|MULE-6318 |Choice exception strategy should not allow several rollback es with redelivery
|MULE-6321 |User defined object store not created on startup
|MULE-6335 |MEL fails to concatenate strings
|MULE-6339 |InboundAttachmentMapContext and OutboundAttachmentMapContext have badly bound keySet() methods
|MULE-6350 |recipient-list does not support new MEL
|MULE-6360 |Spring 3.x default properties broken in Mule
|MULE-6365 |Set-Cookie OutboundProperty not working for more than one Cookie
|MULE-6368 |TemplateParser parse() supports nested expression evaluators but validate() fails with nesting
|MULE-6370 |Logging initialization can cause stack overflow for some setups
|MULE-6374 |Session properties lost in an Exception Strategy
|MULE-6382 |File inbound endpoint does not consume inbound message when using catch exception strategy and streaming
|MULE-6249 |Custom Exception Strategy class not getting being invoked in a Jetty Inbound Endpoint
|MULE-5745 |<script:component>'s output ignored if used after an 'All' message processor
|EE-2632 |Hot deploy of an application throws a zip exception
|EE-2711 |Race condition leads to inconsistent behaviour when an inbound jms queue is missing from the queue manager
|EE-2569 |TransformerException when using JAXB Transformer in a clustered application
|MULE-5852 |request-reply router does not preserve session properties
|EE-2756 |Cache stores intermediate payload of aggregators instead of final payload contents
|EE-2729 |SFTP inbound-endpoint doesn't work when clustered
|EE-2730 |In clustered mules, messages with Stream payloads are lost
|EE-2731 |In clustered mules, messages with large payloads cause OutOfMemory conditions
|MULE-6173 |Transformer weighting algorithm fails to determine transformer with higher priority
|MULE-6211 |Exception shortcut in groovy context is no returning the right value
|MULE-6351 |Expressions with 2 or more levels of nested square brackets are not parsed correctly
|EE-2766 |Big payloads may cause an OOM or flood the logs when there is an Exception
|MULE-5860 |Inserting <collection-splitter /><collection-aggregator /> into a flow produces unexpected results
|EE-2700 |HTTP Polling on a cluster: all nodes poll independently
|MULE-6408 |Map payload is lost when using http post
|MULE-6401 |Lifecycle is not invoked for the MPs in a sub-flow when it is being references with expressions
|MULE-6366 |JDBC Outbound endpoint, loss of session properties when outbound endpoint is request response
|MULE-6325 |Stateful flag does not work in Quartz endpoints
|MULE-6301 |Soap envelope is invalid after cxf proxy if validation is enabled
|MULE-6195 |CopyAttachmentInInterceptor doesn't always copy attachments into the Mule message
|MULE-6188 |CXF Proxy Service (Full Envelope Mode) Fails on XSLT Transformation
|MULE-5104 |Mule3 Notifications are not fired
|MULE-6363 |Applications are not being disposed on deployment failure
|EE-2822 |JDBC EE Outbound endpoint, loss of session properties when outbound endpoint is request response
|MULE-6380 |The foreach stops the flow when receiving an empty collection of xpath tags
|MULE-6346 |SpringBeanLookup.getObjectClass() is not idempotent
|MULE-6338 |Need MEL equivalent of attachments-list:* evaluator
|MULE-6289 |Mule Context missing when receiving a message on TCP inbound endpoint
|MULE-6131 |Defect in TemplateParser when using a Groovy Expression containing pipes
|MULE-5870 |WSProxyService throws exception using Flows (but not Services) when a message is received.
|MULE-6385 |When working offline Mule 3.3 can not resolve schema locations using 3.2 urls
|EE-2770 |Only the primary node should subscribe to a topic
|EE-2797 |Provide ability to configure host/ip for nodes in a cluster through system properties and xml
|EE-2791 |Hazelcast nodes do not consume messages from backup partitions
|EE-2728 |Logging initialization can cause stack overflow for some setups
|MULE-6361 |Add support for values() entrySet() and containsValue() for message property and attachment maps in MEL
|MULE-6352 |TemplateParser doesn't replace expressions resulting in null
|EE-2795 |Session properties are not preserved by cache processor
|===============

=== Mule Studio

[width="100%",cols="50%,50%",]
|===
|STUDIO-9 |Arrows render improperly for choice elements with more than two inputs
|STUDIO-30 |Flow view does not mark as error a flow which was created in the XML view starting with a router
|STUDIO-162 |modifying my flow in the gui removes xml comments from the mule config file
|STUDIO-276 |The mule-deploy.properties gets ignored when checking a project into Git
|STUDIO-280 |Cannot import a Studio project from Git without errors
|STUDIO-306 |When using HTTP with address and delete the port that is displayed by default, the port is not removed and causes errors when running the app
|STUDIO-313 |Removing all constructs separately leaves an empty flow that cannot be reused.
|STUDIO-337 |Fatal error when trying to delete a Mule project
|STUDIO-767 |The Spring bean qualifier, constructor-arg, lookup-method, and replace-method dialog boxes are oversized
|STUDIO-818 |Problem when renaming projects
|STUDIO-949 |Global Reference across flow files
|STUDIO-961 |In the "Configuration XML" tab, within some XML elements, auto-completion is showing all possible XML elements regardless of schema constraints
|STUDIO-981 |REST widget dialog box shouldn't offer support for interceptors since they don't work
|STUDIO-988 |No validation when entering source and target in the enricher and child elements at the same time
|STUDIO-1041 |Twilio connector - Deletes reference to Twilio Config when changing between UI and XML view Two way editing issue
|STUDIO-1045 |XML Framework: Problem with 'All' flow control
|STUDIO-1075 |Unhandled event loop exception when clicking several times on the finish button while the project is being created
|STUDIO-1077 |Unable to refer an HTTP/HTTPS Polling connector from the UI
|STUDIO-1079 |Error mark is not displayed in the element when is inside of an async scope
|STUDIO-1090 |Flow error mark is displayed in the first endpoint of the flow.
|STUDIO-1101 |JDBC Inbound Endpoint should be only one-way
|STUDIO-1102 |SFTP Inbound Endpoint should be only one-way
|STUDIO-1114 |Add validation when deploying an application in the embedded server
|STUDIO-1132 |Drawing errors
|STUDIO-1190 |ENTITY-ID attributes change every time mflow files are saved
|STUDIO-1209 |Global Element - JMS is losing 'Exchange Pattern' field when Mule Studio is re-started
|STUDIO-1309 |mule-deploy.properties gets overwritten every time that you run as mule application
|STUDIO-1407 |Missing validations at user defined lookup table creation
|STUDIO-1421 |When having a list in Java, the upper levels are not displayed for mapping
|STUDIO-1424 |Deleting a mapping flow is not automatically closing the mapping flow
|STUDIO-1427 |xml mapping showing pieces of empty Xml structure
|STUDIO-1443 |Projects aren't portable
|STUDIO-1480 |Lookup tables are not working
|STUDIO-1486 |Clover Icons are displayed in Data Base Lookup table connection and metadata configuration screens
|STUDIO-1490 |When creating a CSV/User Defined Lookup table primary key must be mandatory
|STUDIO-1491 |Unable to create a CSV lookup table when name starts with a number
|STUDIO-1495 |No warning is displayed when erasing a lookup table
|STUDIO-1498 |Connector classes not available in input/output type dialogs
|STUDIO-1507 |Mapping generation for tree reader creates a mapping that does not read anything
|STUDIO-1511 |DM with java beans does not found the object
|STUDIO-1520 |XML with namepsaces does not work
|STUDIO-1524 |DataMapper icon should be in Transformers, not Components
|STUDIO-1544 |If Schema Directory text box is left empty it generates the schema in the / folder
|STUDIO-1572 |DataMapper: clicking on the sample data textbox modifies file, even if no changes were made
|STUDIO-1592 |Drag and Drop Usability issues
|STUDIO-1601 |Choice does not redraw properly
|STUDIO-1610 |JDBC endpoint: no validation for creating empty queries
|STUDIO-1625 |Caching strategy reference should have choice for "default"
|STUDIO-1639 |Name is never added for the 10 elements from the UI neither in auto-completion
|STUDIO-1646 |CTL function gets broken when containing IF statement
|STUDIO-1659 |Going into data mapping by double clicking on Data Mapper Component seems ok, but is not supported.
|STUDIO-1674 |Updating a connector on the extensions classpath breaks your project
|STUDIO-1675 |When renaming an mflow file, the associated xml file is deleted and not regenerated until the mflow is opened again
|STUDIO-1715 |After updating Mule Studio from 1.0.0 to 1.1.0 Connectors disappear from Palette
|STUDIO-1726 |cxf:jaxws-service component loses information
|STUDIO-1736 |Getting Java Null Pointer Exception in the error logs when closing a project that contains Datamapper
|STUDIO-1741 |Disable the Finish button if the types don't have all the required fields filled in
|STUDIO-1748 |When importing project, Studio not aware of existing Data Mapping flow file
|STUDIO-1754 |Unable to change the exchange pattern after selecting a transaction in JDBC, JMS, WMQ and VM
|STUDIO-1764 |Junit Test Doesn't work in 3.3 Studio
|STUDIO-1775 |Deleting a Datamapper box doesn't delete its resources
|STUDIO-1785 |New XML Framework branch: problems with the error mark refresh
|STUDIO-1786 |Autocompletion: for JDBC query adds the attributes in a different order than the UI
|STUDIO-1791 |XML Framework: xml-entity-decoder-transformer is not recognized as a transformer
|STUDIO-1812 |SMTP endpoint can't be dropped into an empty private flow
|STUDIO-1813 |An exception is thrown when trying to run a mule application that contains Data Mapper components
|STUDIO-1827 |New XML Framework: problems with the description tag (<description/>)
|STUDIO-1833 |XML Framework: two-way editing is adding unneeded attributes that I did not configure in the xml
|STUDIO-1843 |XML Framework Autocompletion: stdio elements are not being shown in the autocompletion
|STUDIO-1853 |New XML Framework: wrong header being added to the XML when using message enricher
|STUDIO-1861 |on-redelivery-attempts-exceeded adds a doc:name attribute but it fails because it is not expected
|STUDIO-1865 |New XML Framework: Order of components in flow changes when switching to XML view
|STUDIO-1891 |Missing connector plugin results in failure to open mflow and NPE
|STUDIO-1909 |SOAP Security tab: various problems showing errors in the UI and XML tab
|STUDIO-1920 |Studio removes "evaluator" attribute from expression-powered building blocks.
|STUDIO-1921 |The display name of the Unknown elements in Studio CE is being rendered with the '<' and it should be as the rest 'prefix:element'
|STUDIO-1932 |The configuration-ref attribute on the SOAP element also applies to the client operations
|STUDIO-1941 |According to the CXF schema, simple-client and jaxws-client support databinding
|STUDIO-1951 |Error appears when the data mapper configuration name contains spaces
|STUDIO-1957 |Data Mapper Input Argument data type cannot be changed once created
|STUDIO-1961 |Examples: add/correct the 'version' attribute
|STUDIO-1963 |DataMapper change does not get automatically deployed
|STUDIO-1965 |When inserting otherwise in a when condition the UI is not displaying the flow correctly
|STUDIO-1968 |Data Mapper can´t handle decimal mapping
|STUDIO-1970 |Data Mapper: Input Argument Cannot be deleted - even though deleted from the GUI
|STUDIO-1982 |Deleting Data Mapper component does not delete corresponding .grf files
|STUDIO-1986 |Exception on saving project
|STUDIO-1987 |Salesforce: problem with the UI
|STUDIO-1989 |transactions cause JDBC endpoints to be one-way
|STUDIO-1991 |Studio CE - Extra page is displayed for export project when entering from the DataMapper warning pop up
|STUDIO-1993 |Studio generates invalid element dont_use="true" at object-store-caching-strategy
|STUDIO-1994 |DataMapper doesn't show mapping information because of invalid state
|STUDIO-1996 |E-Store example: JDBC queries are duplicated in e-storeBackend.mflow XML (Two-way editing)
|STUDIO-2006 |Cannot add foreach component
|STUDIO-2007 |Custom classes are not exported
|STUDIO-2012 |Unable to drop cache into the canvas - Getting null pointer exception
|STUDIO-2013 |Unable to drag and drop Async element into the canvas - Null pointer exception
|STUDIO-2014 |Unable to drag and drop Until Successful - Null pointer exception
|STUDIO-2015 |Getting Unhandled event loop exception when trying got add an element into the flow
|STUDIO-2016 |Unable to drag and drop All into the canvas - null pointer exception
|STUDIO-2017 |Unable to drag and drop First Successful - null pointer exception
|STUDIO-2023 |Data Mapper UI is slow with big structures
|STUDIO-2029 |New Framework: Remove the cache duplicate auto-completion option from the XML
|STUDIO-2035 |Choice Element Order
|STUDIO-2036 |Input argument with colon and/or slashes fail
|STUDIO-2039 |New XML Framework: Getting null pointer exception when auto-completing CXF configuration
|STUDIO-2041 |Getting Unhandled event loop exception when playing around with the new UI regarding the new way to handle objects in Salesforce
|STUDIO-2045 |Studio CE version: Add a Cancel button to the warning DataMapper dialog
|STUDIO-2048 |After dragging and dropping a RQ-RS element the double icon is converted to single but with 2 arrows
|STUDIO-2049 |POP3, IMAP, JETTY, Composite Source and Poll elements are only inbound endpoints and I am able to move them as outbound endpoints
|STUDIO-2050 |Salesforce and Twitter Streaming are only inbound endpoints and when moving them they are still displayed as Streaming and not Connectors
|STUDIO-2051 |New XML Framework: Global elements are added at the bottom of the XML instead of being added before the flows
|STUDIO-2053 |Unable to create message flows when having more than a project in the workspace and you have to select the project by drop down list
|STUDIO-2055 |Restore the tutorial example files
|STUDIO-2056 |Scripting properties get deleted from xml when modifying something from the UI
|STUDIO-2061 |New XML Framework: Unable to create neither a connector nor a global endpoint from the Connector Reference "+" and getting Unhandled event loop exception in error log
|STUDIO-2062 |Data Mapper cannot map ZObject (Zuora Connector)
|STUDIO-2064 |Change the order of endpoint and connector reference in the SAP endpoint - References pane so that is consistent with the rest of the endpoints
|STUDIO-2065 |Poll is not offered for auto-completion when typing "<poll..."
|STUDIO-2066 |New XML Framework: Components invert the order after adding some global elements from the UI
|STUDIO-2069 |Auto-completion doesn't work when trying to add elements in the exception strategies
|STUDIO-2070 |The area to drag and drop elements in the exception strategies components are reduced when going back and forth
|STUDIO-2071 |The "+" button should be disable when selecting "None" or "Default in memory TID store" from the Type drop down list of the SAP endpoint.
|STUDIO-2072 |SAP configuration endpoint is not well displayed in Mac
|STUDIO-2075 |Pop3 global endpoint and connector references lost when going back and forth
|STUDIO-2076 |Getting AssertionError when moving a filter and after that saving the project
|STUDIO-2077 |Getting Unhandled event loop exception when trying to move any element to Until Successful or Message Enricher
|STUDIO-2082 |XML Writer mapping is generates duplicated namespaces
|STUDIO-2083 |Error in two way editing when you move existing elements on the canvas
|STUDIO-2085 |New XML Framework: SSL endpoint - Exchange pattern radio buttons are removed when changing to XML view and coming back to canvas
|STUDIO-2086 |Default values in the UI regarding the radio buttons are lost when going to the XML and coming back to the UI
|STUDIO-2090 |Null error when importing a project
|STUDIO-2091 |DataMapper: Problem when mapping and excel file
|STUDIO-2094 |Problems when opening a workspace which has a project that uses CC that are not installed in the current Studio version
|STUDIO-2095 |Inbound endpoint should be converted to Outbound endpoint when dragging and dropping an Inbound endpoint from the flow into any exception strategy
|STUDIO-2096 |Unable to drag and drop any exception in the canvas inside the choice exception strategy - Getting errors
|STUDIO-2098 |Change the text of the DataMapper warning dialog
|STUDIO-2099 |Getting duplicate icon and errors when dragging and dropping an element inside the rollback exception strategy to the redelivery exhausted section
|STUDIO-2100 |Reference Exception strategy is lost when dragging and dropping it in the canvas
|STUDIO-2102 |Don't allow to drag and drop an outbound endpoint inside a composite source
|STUDIO-2103 |XML Framework: problem with two-way editing configuring business events
|STUDIO-2106 |Choice Flow Config does not save configuration
|STUDIO-2107 |Null Pointer exception pop up displayed when adding annotations in the XML manually and save the project
|STUDIO-2110 |Sets of radio buttons on pattern properties window behave as a unique group
|STUDIO-2111 |<message-properties-transformer> scope="invocation" property missing after ui interaction
|STUDIO-2112 |Deploy to CloudHub dialog box has MuleiON URL
|STUDIO-2113 |Scripting file references need to be relative paths
|STUDIO-2118 |Error with multiple sap-outbound-endpoint
|STUDIO-2122 |New Mule Project wizard inconsistent when changing Server Runtime and creating templates
|STUDIO-2124 |Unhandled event loop exception when trying to move an element that is not supported in the canvas
|STUDIO-2126 |DataMapper: NPE when clicking in the add mapping button
|STUDIO-2127 |DataMapper: InvalidGraphObjectNameException when creating a Lookup table with no name
|STUDIO-2131 |Drag and drop: Inbound endpoint is converted to outbound endpoint when dragging it on the arrow before the second element of the flow
|STUDIO-2132 |Transformer refs comma separated instead of space separated
|STUDIO-2133 |DataMapper: Able to create exactly the same input arguments
|STUDIO-2134 |DataMapper: Enlarge Database lookup table configuration window
|STUDIO-2135 |Omitted default values in endpoint configurations are marked as missing
|STUDIO-2144 |SOAP and Rest components should have the shadow icon in the response section of the flow
|STUDIO-2145 |Drag and Drop: Redrawing issue when undoing an action
|STUDIO-2146 |ERROR caused by: Result of xpath filling field 'groupLabel' contains two or more values!
|STUDIO-2147 |Only queryKey is marked as mandatory for JDBC endpoint while Address is a valid attribute if queryKey is not specified
|STUDIO-2148 |New XML Framework: When Studio asks to update namespaces the XML is reformatted in a bad way
|STUDIO-2149 |createMultipleTransactedReceivers attribute is not supported by Studio in any connector by the UI nor the XML (Getting errors)
|STUDIO-2152 |DataMapper forces to map the root of an XML
|STUDIO-2153 |DataMapper: problems with the Example that comes within - STUDIO
|STUDIO-2154 |error adding context:property-place-holder
|STUDIO-2155 |Drag and Drop: problem when dragging multiple selection that contains a message source
|STUDIO-2156 |Salesforce XML Deleted when round trip editing with GUI
|STUDIO-2158 |Studio - Classpath problem when having two references to mule-core within the project
|STUDIO-2159 |DataMapper: NPE when configuring a DB lookup table
|STUDIO-2160 |Icon not showing when adding dependency
|STUDIO-2161 |broken layout after adding foreach to the flow
|STUDIO-2164 |Global endpoint's inner element is duplicated after edition
|STUDIO-2165 |Error saving configuration
|STUDIO-2166 |Problem drop-&-drop Flow-Ref into Enricher
|STUDIO-2167 |Error in project after upgrading Mule Studio to 1.3.1
|STUDIO-2169 |Cannot update/uninstall connector
|STUDIO-2170 |Flow view shows an error icon on a component with no extra info
|STUDIO-2171 |Assertion error upon project saving
|STUDIO-2172 |Remove all Clover options from Studio menus
|STUDIO-2173 |SAP endpoints don't allow the name attribute
|STUDIO-2174 |Script inside script transformer being duplicated on save
|STUDIO-2175 |Studio adds redundant schemas when saving project
|STUDIO-2180 |Create Mule ESB 3.3.1 and Reset 3.3.0 changes introduces to 3.3.0
|STUDIO-2181 |Drag and Drop: when dragging multiple elements to an empty flow, it doesn't resize to show all the elements
|STUDIO-2193 |Runtime Exception using RMI connector
|STUDIO-2198 |Correct minor spelling issues in Foreach Example template
|STUDIO-2200 |ClassCastException when using the "Export Diagram" functionality on any view other than the Message Flow editor
|STUDIO-2218 |Global References: When creating a reference to a Processing Strategy created in another file a 'Can't not be found error' is shown
|STUDIO-2219 |Global References across flow files: Name attribute should be unique across multiple flow files within a project
|STUDIO-2221 |Global References across flow files: Flow ref element is not able to create references to flows created in other files
|STUDIO-2228 |Problem with "Turn off error reporting in XML editor"
|STUDIO-2236 |All EE elements are missing in the palette
|STUDIO-2237 |Success message for CloudHub deployment says muleion.com
|STUDIO-2238 |DataMapper warning message is being shown in last EE version
|STUDIO-2239 |Drawing problem when deleting the Async
|STUDIO-2240 |Undo action is not working properly
|STUDIO-2241 |Drawing issue when deleting response block
|STUDIO-2243 |General drawing problems (probably related to the response arrow)
|STUDIO-2244 |Missing feedback image when dropping an element inside the choice
|STUDIO-2245 |Problems with examples
|STUDIO-2246 |I am able to drag a message processor before a Poll
|STUDIO-2251 |Problem with Security Example template project
|STUDIO-2252 |Define a new way to show Beans and validate that the Name / ID is unique
|STUDIO-2257 |Namespaces problems: FTP and JDBC
|STUDIO-2259 |In some cases DataMapper component can not be deleted
|STUDIO-2260 |The Welcome Screen is empty in the CE distribution
|STUDIO-33 |In Palette view mode, studio should allow the user to select individual components of the flow for bulk operations (eg. delete)
|STUDIO-62 |Mule Studio Editor Allow to move components inside the flow.
|STUDIO-319 |Bind the delete key to the delete action in Studio
|STUDIO-381 |When the project gets saved the flog config file should get 'touched' automatically
|STUDIO-934 |Improve the Choice Interface
|STUDIO-989 |Two-Way Editing - Default values are removed from the UI when going back and forth without saving the project
|STUDIO-1257 |Migrate VM transactions to the new framework
|STUDIO-1263 |Add Mule Security Manager into Soap Component - Advanced pane
|STUDIO-1444 |Tree Metadata Editor
|STUDIO-1470 |Be able to modify the object metadata
|STUDIO-1539 |Mapping dialog preview panel does not show anything useful if the graph execution fails
|STUDIO-1575 |Remove Connectors from Studio
|STUDIO-1616 |Data Mapper can't auto-detect types of a connect when it's in a <poll> tag
|STUDIO-1760 |Don't pretty-print the XML
|STUDIO-1787 |Duplicate Project Issue in Maven Import
|STUDIO-1835 |WSDL to java in Studio is using old version of CXF
|STUDIO-1844 |Add Orders Example to Studio
|STUDIO-1849 |Project Import applies wrong namespace
|STUDIO-1922 |Add default value \#\] for expressions in return arguments in the expression transformer
|STUDIO-2010 |Improve the look and feel of the welcome screen
|STUDIO-2031 |Drag components inside blocks
|STUDIO-2037 |Echo Example - Change the name of the flow and xml to Echo
|STUDIO-2038 |New XML Framework: Errors regarding CXF configuration in Order Fulfillment Example
|STUDIO-2043 |Java Object - Rename "object" to to class name
|STUDIO-2084 |A new flow should not be inserted only at the final, but in any position
|STUDIO-2123 |Change the feedback image provided when the user drag and drop an element from the palette
|STUDIO-2125 |Inform the user with a dialog when he tries to move a message source which can only be moved to the beginning of a flow.
|STUDIO-2143 |DataMapper: improve error message when mapping an interface class with errors
|STUDIO-2189 |Add preference to turn off validations and error reporting from the xml editor
|STUDIO-2190 |Keep unknown child elements in the xml editor
|STUDIO-2191 |Improve the Mule Studio preferences
|STUDIO-2192 |Add specific Clonnector dependencies to the project classpath automatically when dropping a CC on the canvas
|STUDIO-2214 |Beans ID should be unique, when creating a bean in the Global elements tab, the Bean ID attribute should be unique
|STUDIO-2216 |Ask the user to save changes in a file when changing from one file to another
|STUDIO-2225 |SOAP: Validation improvement needed in the Databinding section
|STUDIO-67 |Choice Router should be possible to give user defined annotations for each choice
|STUDIO-83 |Should be possible to export to PDF/PNG the diagram shown on Mule Studio
|STUDIO-275 |Bundle Egit in the stand-alone bundle of Studio
|STUDIO-633 |Collapse the namespacess in the XML view
|STUDIO-932 |User should be able to edit the display name of the elements from the canvas
|STUDIO-1606 |Lookup Table for ION
|STUDIO-1847 |Add Travel Agent example to Studio
|STUDIO-1851 |Resources in src/main/resources are not recognized in flows when deploying with Run As Mule Application
|STUDIO-1905 |Data Mapper does not support agregation for CSV
|STUDIO-1997 |Data Mapper loses namespace when data type is changed on input side
|STUDIO-2008 |Make MULE_RUNTIME be available in Libraries in Studio
|STUDIO-2009 |Allow keyword search in the palette
|STUDIO-2011 |Data Mapper Usability enhancements
|STUDIO-2027 |Allow to move components (drag and drop) between flows.
|STUDIO-2032 |Allow to move multiple selected components inside a flow and between flows.
|STUDIO-2047 |As a user I would like to be able to drag and drop an inbound endpoint of a preexisting flow to create a new flow with it
|STUDIO-2063 |When dragging and dropping and inbound endpoint to an outbound position, prompt the user if he wants to do so.
|STUDIO-2068 |Allow to move flows in the canvas
|STUDIO-2108 |Create the cloud-connector-endpoint element in the framework
|STUDIO-2117 |Allow to move flows inside the canvas
|STUDIO-2150 |Make Connector Libraries available as eclipse libraries
|STUDIO-2151 |Connector libraries usability
|STUDIO-2157 |Drawing issue with async
|STUDIO-2182 |Add a Wizard page to create a pom.xml
|STUDIO-2202 |Update the hello example template
|STUDIO-2206 |Add security example as template in Studio EE
|STUDIO-1545 |Update Intermediate Studio Tutorial
|===

=== Mule Management Console

_Enterprise Edition_


[width="100%",cols="50%,50%",]
|===
|MMC-1256 |Unable to create a Log Regex Alert selecting a Server
|MMC-1234 |Restarting one cluster, restarts all the clusters that have been configured.
|MMC-1216 |After deploying app to a cluster with some nodes down, when they are up again, app is not deployed to previously down nodes, no error message.
|MMC-1199 |When creating a cluster, all apps deployed using a server group are not removed.
|MMC-1262 |MMC should allow creating a cluster of up to 8 nodes
|MMC-1246 |Include "usernameAttribute" parameter of the userDetailsMapper on mmc-ldap.properties file (blocks ActiveDirectory authentication)
|===

=== Mule DevKit

[width="100%",cols="50%,50%",]
|===
|DEVKIT-117 |"Attempt to reopen a file for path mule-sfdc2.xsd" when renaming SalesforceConnector module to sfdc2
|DEVKIT-167 |@OAuthAccessTokenIdentifier ignored
|DEVKIT-50 |@Optional @Default(#payload) doesn't work when payload is a list
|DEVKIT-209 |SFDC Connector: Refresh Token is not working
|DEVKIT-104 |ClassCastException when using DM in a nested sub-flow
|DEVKIT-183 |OAuth2 authorization throws http 400
|DEVKIT-18 |@Inject annotation requires fully qualified name
|DEVKIT-143 |SFDC Connector: Exception in @Connect method does not rethrow exception.
|DEVKIT-48 |Add support for classes with @XmlType
|DEVKIT-154 |OAUTH: Could not find connector with name 'connector.http.mule.default'
|DEVKIT-162 |Maven project created for new connector by the generate archetype can't be imported in Eclipse
|DEVKIT-169 |SFDC Connector: state param should not be lowercased
|DEVKIT-170 |Could not find a transformer
|DEVKIT-171 |Examples validation fails when there is no internet connection
|DEVKIT-195 |AbstractDefinitionParser only generated for the first module in a multi module project
|DEVKIT-54 |Support generation of Studio plugins in projects with multiple @ Module classes
|DEVKIT-151 |Broken generated docs: no items in 'Message Processors'/'Message Sources' section
|DEVKIT-173 |Error generating documentation
|DEVKIT-184 |No studio elment is generated for oauth-callback-config and oauth-store-config
|DEVKIT-32 |Oauth1 variables being generated instead of Oauth2
|DEVKIT-31 |<message-properties-transformer> does not specifes invocation scope
|DEVKIT-36 |Exception created but not thrown in generated LifeCycleAdapter
|DEVKIT-55 |Add check to forbid @ Processor and @ Source methods parameters and @ Configurable fields to be called 'name'
|DEVKIT-132 |Add integration tests to check the Studio plugin generation for OAuth1 and OAuth2 enabled connectors
|DEVKIT-129 |Add validation to check for accessors for OAuth1 and OAuth2 specific instance variables
|DEVKIT-70 |Metadata adapter does not compile when module is abstract
|DEVKIT-84 |RestQueryParam is ignored in RestCall
|DEVKIT-152 |Oauth1 Adapter is not setting the access token and secret in the consumer when restoring the access token
|DEVKIT-116 |Devkit should check its dependencies not to fail with ClassNotFoundException
|DEVKIT-63 |Validate that @Module's do not have the same MessageProcessor names
|DEVKIT-139 |Errors mapping complext type to schema
|DEVKIT-176 |Problem with Studio and complex types
|DEVKIT-131 |Add callback path attribute to Studio plugins for OAuth1 and OAuth2 enabled connector
|DEVKIT-190 |Studio doesn't recognize OAuth config attributes
|DEVKIT-194 |SFDC Connector: NPE when trying to restore an OAuth Token.
|DEVKIT-11 |Generated source folders not added to classpath when using m2eclipse
|DEVKIT-10 |mashape errors when using connectors in m2eclipse
|DEVKIT-210 |"An annotation processor threw an uncaught exception" compiling connector with Devkit 3.3.1
|DEVKIT-216 |Error migrating connector to Devkit 3.3.1
|DEVKIT-213 |DevKit 3.3.1 is not parsing correctly the connector schema
|===

== Third Party Connectors and other modules

At this time, not all of the third party modules you may have been using with previous versions of Mule ESB have been upgraded to work with Mule ESB 3.3.1. mailto:sales@mulesoft.com[Contact MuleSoft] if you have a question about a specific module.

== Migrating from Mule ESB 3.3.0 to 3.3.1

The improvements and fixes that Mule ESB 3.3.1 introduces require no specific migration activities for Mule ESB, Studio, and Management Console. The Mule DevKit section below details the migration activities for connectors.

For more details on how to migrate from previous versions of Mule ESB, access the link:/release-notes/legacy-mule-migration-notes[library of Migration Guides].

=== Mule DevKit - OAuth Migration Guide

We implemented a few source code changes for OAuth in DevKit 3.3.1.

==== Deprecated `@OAuth`/`@OAuth2` Within a `@Module`-annotated Class

The `@OAuth` and `@OAuth2` annotations, which previously were only valid in `@Module` classes, are now only valid in `@Connector` classes. We are working toward a model in which the top-level annotation defines the category for the extension, so supporting OAuth security only makes sense in a connector. To continue to use OAuth security, change the top-level annotation from `@Module` to `@Connector.` The following example uses the Facebook connector to illustrate the change.

Before migration:
[source,java, linenums]
----
@Module(name = "facebook", schemaVersion = "2.0")
@OAuth2(accessTokenUrl = "https://graph.facebook.com/oauth/access_token", authorizationUrl = "https://graph.facebook.com/oauth/authorize",
        accessTokenRegex = "access_token=([^&]+?)&", expirationRegex = "expires_in=([^&]+?)$")
public class FacebookConnector { ... }
----

After migration:
[source,java, linenums]
----
@Connector(name = "facebook", schemaVersion = "2.0")
@OAuth2(accessTokenUrl = "https://graph.facebook.com/oauth/access_token", authorizationUrl = "https://graph.facebook.com/oauth/authorize",
        accessTokenRegex = "access_token=([^&]+?)&", expirationRegex = "expires_in=([^&]+?)$")
public class FacebookConnector { ... }
----

==== Access Token Annotations

Two annotations which identified two parameters in an `@Processor` have changed in 3.3.1. Previously, the following annotations performed these tasks:

* `@OAuthAccessToken`: received the access token
* `@OAuthAccessTokenSecret`: received the access token secret

In 3.3.1, do not use these annotations in a parameter. Use them, instead, as fields inside a connector.

For example, the following *3.3.0* Facebook connector snippet retrieves a user's details when logged in. In the `@Processor` method, notice the single argument — `accessToken` — annotated with `@OAuthAccessToken`. To each protected resource in a service provider which requires an OAuth access token to access, you must explicitly add the annotation.
[source,java, linenums]
----
/**
 * Gets the user logged details.
 * <p/>
 * {@sample.xml ../../../doc/mule-module-facebook.xml.sample facebook:logged-user-details}
 *
 * @param accessToken the access token to use to authenticate the request
 * @return response from Facebook the actual user.
 */
@Processor
public Map<String, Object> loggedUserDetails(@OAuthAccessToken String accessToken)
{ ... }
----
In **3.3.1**, you use the annotations as fields inside the connector. This obviates the need to ascribe dedicated parameters in each `@Processor`. The following snippet illustrates the same Facebook connector example in 3.3.1.
[source,java, linenums]
----
@OAuthAccessToken
private String accessToken;

/**
 * Gets the user logged details.
 * <p/>
 * {@sample.xml ../../../doc/mule-module-facebook.xml.sample facebook:logged-user-details}
 *
 * @param accessToken the access token to use to authenticate the request
 * @return response from Facebook the actual user.
 */
@Processor
@OAuthProtected
public Map<String, Object> loggedUserDetails()
{ ... }
----
==== New `@OAuthProtected` Annotation

Mule DevKit 3.3.1 introduces a new annotation, `@OAuthProtected`, to indicate `@Processor` methods that require an access token (see code snippet above).

In 3.3.0, you used the `@OAuthAccessToken` and `@OAuthAccessTokenSecret` annotations to indicate when a method required an access token. You could implement methods, as in the Facebook connector example above, for accessing protected and unprotected resources in the same connector. In other words, you could access an unprotected resource without an access token.

In 3.3.1, DevKit wraps the `@OAuthAccessToken` and `@OAuthAccessTokenSecret` annotations to enforce an OAuth dance before executing the annotations.

== Support Resources

Please refer to the following resources for assistance using Mule ESB 3.3.1.

=== Documentation

Refer to link:http://www.mulesoft.org[Mulesoft.org] for Mule ESB 3.3.0 documentation updated to include details for Mule ESB 3.3.1.

=== Getting Help

Access MuleSoft’s link:http://forum.mulesoft.org/mulesoft[Forum] to pose questions and get help from Mule’s broad community of users.

_*Enterprise Edition*_ To access MuleSoft’s expert support team, link:http://www.mulesoft.com/mule-esb-subscription[subscribe] to Mule ESB Enterprise Edition and log in to MuleSoft’s link:http://www.mulesoft.com/support-login[Customer Portal].
